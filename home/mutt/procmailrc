#PATH for binary used herein
PATH=/bin:/usr/bin

MAILDIR=$HOME/Mail              # Top directory for all other directories
LOGFILE=$HOME/.procmail.log
VERBOSE=yes

MONTHFOLDER=‘date +%y-%m‘
#DUMMY=‘test -d $MONTHFOLDER || mkdir $MONTHFOLDER‘

SUBJECT=‘formail -xSubject:‘    # regular field
FROM=‘formail -rt -xTo:‘        # special case

#----------------------------------------------------------------------
# RECIPES
 
# Sample recipes are provided at 'man procmailex' 

# The recipes are processed sequentially until original mail is stored

# :0 [flags] [ : [locallockfile] ]                  <-- recipe meta info
# <ZERO or more conditions (one per line)>          <-- used for selection/filtering
# <exactly one action line>                         <-- what to do

# flags :
# c         - carbon copy email and if matched execute action, continue with next recipe
# a or A    - executed if the conditions on the last preceding recipe (on the current block-nesting level) without the `A' or `a' flag matched
# E         - executes if the immediately preceding recipe was not executed. 
# B         - apply condition only on the body?
# H         - apply condition only on the header?
# h         - feed the header to the pipe-action
# b         - feed the body to the pipe-action
# i         - Ignore any write errors on this recipe (i.e. usually due to an early closed pipe that is a pipe-action that doesn't use the piped info)
# f         - consider pipe-action like a filter (transformation). With filter, the email is not considered delivered and therefore processing continues
# w or W    - Wait for the pipe-action to finish and check its exit code (normally ignored); if unsuccessful, the text will not have been filtered.

# :                                 - use a lockfile
# locallockfile                     - nnon default name of lock file

# action format is :
# ! email1, email2                  - Forwards to all the specified mail addresses
# |                                 - pipe-action 
# {                                 - Start of nesting block (subset of recipes)
# storage_file_or_dir               - where to store the email (could be ‘date +%y-%m‘/inbox)

# Condition
# * !^FROM_MAILER                   - not from postmaster (FROM_MAILER)
# * < 1000                          - email shorter than 1000 bytes
# * B ?? spam                       - body of message contains the word 'spam'

# Make a backup of everything...
# Copy the new mails in the backup dir
#:0 c
#backup_2011

:0
inbox

#:0:
#* ^from.*firewall@lynceantech.com
#firewall

#:0:
#* ^Subject:.*beagleboard
#lists/beagleboard

#:0:
#* ^Subject:.*comedi
#lists/comedi

#:0:
#* ^Subject:.*Qt-interest
#lists/qt

#:0:
#* ^Subject:.*PyQt
#lists/pyqt

#:0:
#* ^Subject:.*svlug
#lists/svlug

#:0:
#* ^TOsupd-members
#lists/stanford

#:0:
#* ^TOtech-talk@aps.anl.gov
#lists/epics

#:0:
#* ^Subject:.*Lcms-users
#lists/lcms
#:0:
#* ^(From|Cc:|To:) lcms-user@lists.sourceforge.net
#lists/lcms

#:0:
#* ^Subject:.*ts-7000
#lists/ts7000

#:0:
#* ^TOmplayer-users@mplayerhq.hu
#lists/mplayer



#:0:
#* ^Subject:.*test
#test

##:0
##* ^From.*peter
##* ^Subject:.*compilers
##{
  ##:0 c
  ##! william@somewhere.edu
##
  ##:0
  ##petcompil
##}

#:0 c
#* ^FROM_MAILER
#postmaster


#Store  all  the messages about meetings in a folder that is in a direc-
#tory that changes every month.  E.g.  if  it  were  January  1994,  the
#folder  would have the name ‘94-01/meeting’ and the locallockfile would
#be ‘94-01/meeting.lock’.
#The same as above, but, if the ‘94-01’ directory wouldn’t have existed,
#it is created automatically:

##MONTHFOLDER=‘date +%y-%m‘

# Create dir and don't stop here!
# Suppress program failure message also
##:0 Wic
##* ? test ! -d $MONTHFOLDER
##| mkdir $MONTHFOLDER

##:0:
##* meeting
##${MONTHFOLDER}/meeting

# Delete all but toe last 32 messages
# i: ignore any write error on the recipe
#:0 ic
#| cd backup && rm -f dummy ‘ls -t msg.* | sed -e 1,32d‘

# ALL MESSAGES NO PROCESSED GO TO 
# /var/mail/spool/<username>
